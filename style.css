:root {
    --bg-radial-center: #d49a9a;
    --bg-radial-edge: #732f2f;
    --book-color: #4a1212;
    --gold: #ffffff;
    --page-color: #ffffff;
    --text-color: #ffffff;
    --star-opacity: 0;
    --library-opacity: 1;
}

body.dark-mode {
    --bg-radial-center: #e0e0e0;
    --bg-radial-edge: #2a2a2a;
    --book-color: #888888;
    --gold: #e0e0e0;
    --page-color: #f2f2f2;
    --text-color: #000000;
    --star-opacity: 4;
    --library-opacity: 0;
}

body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #000;
    font-family: 'Georgia', serif;
    overflow: hidden;
    perspective: 2000px;
}

/* Fundo e estrelas */
.library-bg {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: radial-gradient(circle at center, var(--bg-radial-center), var(--bg-radial-edge));
    opacity: var(--library-opacity);
    transition: opacity 1.5s ease;
    z-index: -2;
}

.stars-container {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: -1;
    opacity: var(--star-opacity);
    transition: opacity 2s ease-in-out;
}

body:not(.dark-mode) .stars-container { opacity: 0 !important; }

.stars-layer {
    position: absolute; inset:0;
    background-repeat: repeat;
    animation: moveStars linear infinite;
}
.layer-1 { background-size: 500px 500px; animation-duration: 60s; }
.layer-2 { background-size: 800px 800px; animation-duration: 100s; }
.layer-3 { background-size: 400px 400px; animation-duration: 150s; }

@keyframes moveStars { from{transform: translateY(0);} to{transform: translateY(-100%);} }

/* Controles */
.controls { position: absolute; top: 30px; z-index: 250; display:flex; gap:15px; }
button {
    padding:12px 25px; border:2px solid var(--gold);
    border-radius:30px; background:rgba(0,0,0,0.6); color:var(--gold);
    font-family:'Georgia', serif; font-size:1em; cursor:pointer; transition:0.3s; backdrop-filter: blur(5px);
}
button:hover { background:var(--gold); color:#000; transform:scale(1.05); }

/* Livro */
.book-container { position: relative; width:320px; height:460px; transform-style: preserve-3d; cursor:pointer; transition: transform 1.2s cubic-bezier(0.25,1,0.5,1);}
.book-container.open {} /* nÃ£o move mais para manter fogo central */

.book { width:100%; height:100%; position:relative; transform-style: preserve-3d; }

.page { position:absolute; width:100%; height:100%; top:0; left:0; transform-origin:left; transform-style: preserve-3d;
    border-radius: 4px 12px 12px 4px; background:var(--page-color);
    box-shadow: inset 15px 0 30px rgba(0,0,0,0.1), 2px 0 5px rgba(0,0,0,0.1);
    transition: transform 2s cubic-bezier(0.4,0,0.2,1); }
.front-cover { background: var(--book-color); z-index:20; display:flex; justify-content:center; align-items:center; border:5px solid var(--gold);}
.back-cover { background: var(--book-color); z-index:0; transform:translateZ(-30px); }

.spine { position:absolute; top:0; left:0; width:30px; height:100%; background:#3e2723; transform:rotateY(-90deg) translateX(-15px); transform-origin:left; z-index:10; }

.p1{ z-index:15; } .p2{ z-index:14; } .p3{ z-index:13; display:flex; align-items:center; justify-content:center; text-align:center; padding:20px; box-sizing:border-box; }

.book-container.open .front-cover{ transform: rotateY(-180deg); transition-delay:0s; }
.book-container.open .p1{ transform: rotateY(-170deg); transition-delay:0.1s; }
.book-container.open .p2{ transform: rotateY(-160deg); transition-delay:0.3s; }
.book-container.open .p3{ transform: rotateY(-10deg); transition-delay:0.5s; background: linear-gradient(to right,#ddd,var(--page-color)10%); border-left:none; }

/* PartÃ­culas */
.particle{ position:absolute; border-radius:50%; pointer-events:none; z-index:999; mix-blend-mode:screen; will-change: transform,opacity; }
@keyframes floatUp{ 0%{opacity:0;transform:translate(0,0) scale(0);} 10%{opacity:1; transform:translate(var(--tx),-50px) scale(1);} 100%{opacity:0; transform:translate(var(--tx-end),-600px) scale(0);} }

/* ðŸ”¥ FOGO - Maior e Ã  frente */
.fire-container{
    position:absolute; width:200px; height:250px; z-index:2000; pointer-events:none; opacity:0; transition:opacity 0.5s ease-in-out;
}
.fire-container.active{opacity:1;}
.flame{position:absolute; bottom:0; left:50%; transform:translateX(-50%); border-radius:50%;}
.red-flame{width:100px; height:140px; background:#ff4500; box-shadow:0 0 40px 15px #ff4500;}
.orange-flame{width:90px; height:120px; background:#ffa500; box-shadow:0 0 35px 15px #ffa500;}
.yellow-flame{width:70px; height:90px; background:#ffd700; box-shadow:0 0 30px 10px #ffd700;}
.white-flame{width:50px; height:70px; background:#ffffff; box-shadow:0 0 20px 8px #ffffff;}
